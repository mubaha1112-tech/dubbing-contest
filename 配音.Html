<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è‹±è¯­é…éŸ³æŒ‘æˆ˜èµ›</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f0f4f8; margin: 0; padding: 20px; text-align: center; }
        h1 { color: #333; font-size: 24px; margin-bottom: 20px; }
        .container { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; }
        select { width: 100%; padding: 12px; margin-bottom: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; background: white; }
        .btn { display: block; width: 100%; padding: 15px; border: none; border-radius: 50px; font-size: 18px; font-weight: bold; cursor: pointer; color: white; margin-top: 10px; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); box-shadow: 0 4px 10px rgba(118, 75, 162, 0.3); }
        .btn-action { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%); color: #d63384; display: none; margin-top: 20px; }
        
        #video-container { margin-top: 20px; display: none; position: relative; }
        video { width: 100%; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
        
        /* å…¨å±æ—¶çš„æ ·å¼ */
        .fullscreen-mode {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: black; z-index: 9999; display: flex; align-items: center; justify-content: center;
        }
        .fullscreen-mode video { width: 100%; height: auto; max-height: 100vh; border-radius: 0; }
        
        .tip { font-size: 12px; color: #888; margin-top: 10px; }
        
        /* æç¤ºå±‚ */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 10000; display: none;
            flex-direction: column; align-items: center; justify-content: center; color: white;
        }
        .guide-text { font-size: 20px; margin-bottom: 30px; line-height: 1.5; padding: 0 20px; }
        .count-down { font-size: 60px; font-weight: bold; color: #ffeb3b; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ¤ è‹±è¯­å°å°é…éŸ³å‘˜</h1>
    
    <label for="levelSelect" style="display:block; text-align:left; margin-bottom:5px; font-weight:bold; color:#555;">é€‰æ‹©çº§åˆ« (Level):</label>
    <select id="levelSelect" onchange="updateUnits()">
        <option value="">-- è¯·é€‰æ‹©çº§åˆ« --</option>
        <!-- çº§åˆ«å°†é€šè¿‡JSç”Ÿæˆ -->
    </select>

    <label for="unitSelect" style="display:block; text-align:left; margin-bottom:5px; font-weight:bold; color:#555;">é€‰æ‹©å•å…ƒ (Unit):</label>
    <select id="unitSelect" disabled>
        <option value="">-- è¯·å…ˆé€‰æ‹©çº§åˆ« --</option>
    </select>

    <button class="btn btn-primary" onclick="findVideo()">ğŸ” æŸ¥æ‰¾é…éŸ³è§†é¢‘</button>

    <div id="video-container">
        <video id="mainVideo" playsinline controls controlsList="nodownload">
            <source src="" type="video/mp4">
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾ã€‚
        </video>
        <button class="btn btn-action" id="dubbingBtn" onclick="startDubbingMode()">ğŸ™ï¸ ç‚¹å‡»å¼€å§‹é…éŸ³æ¨¡å¼</button>
        <p class="tip">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ï¼Œè§†é¢‘å°†å…¨å±ï¼Œè¯·é…åˆæ‰‹æœºå½•å±åŠŸèƒ½ä½¿ç”¨ã€‚</p>
    </div>
</div>

<div id="overlay" onclick="startPlay()">
    <div class="guide-text">
        ç¬¬ä¸€æ­¥ï¼šè¯·ä¸‹æ‹‰æ‰‹æœºæ§åˆ¶ä¸­å¿ƒ<br>å¼€å¯ ğŸ”´ <b>å±å¹•å½•åˆ¶</b><br><br>
        ç¬¬äºŒæ­¥ï¼šç‚¹å‡»å±å¹•å¼€å§‹æ’­æ”¾<br>å¹¶å¤§å£°è·Ÿè¯»ï¼
    </div>
    <div class="count-down">GO!</div>
</div>

<script>
    // ================= æ•°æ®é…ç½®åŒº (éœ€æ‰‹åŠ¨å®Œå–„é“¾æ¥) =================
    // ä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘å¡«å…¥äº†å›¾ç‰‡ä¸­éƒ¨åˆ†é“¾æ¥ã€‚ä½ éœ€è¦å°†Excelä¸­çš„é“¾æ¥å…¨éƒ¨å¡«å…¥æ­¤å¤„ã€‚
    // æ ¼å¼ï¼š 'çº§åˆ«å': ['Unit1é“¾æ¥', 'Unit2é“¾æ¥', ..., 'Unit9é“¾æ¥']
    // æ³¨æ„ï¼šå¦‚æœæŸå•å…ƒæ²¡æœ‰è§†é¢‘ï¼Œè¯·å¡«å…¥ç©ºå­—ç¬¦ä¸² ""
    
    const videoDatabase = {
        "K2A": [
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763011941537284494.mp4", // Unit 1
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763011945233cae631.mp4", // Unit 2
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/17630119516450a277c.mp4", // Unit 3
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763012048115b61f0f.mp4", // Unit 4
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/2b63bb6d3c08490db6dd9d2b4fe656d7/teacher-homework/1763012051505623f0e.mp4", // Unit 5
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/cc581b40f6b342ab8766ecb497b0593c/teacher-homework/17630120579742d4c02.mp4", // Unit 6
            "", "", "" // Unit 7, 8, 9 (ç©º)
        ],
        "K2B": [
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/75c7beb9392e4cf9960c6eede634c52c/teacher-homework/17630120691122d5403.mp4", 
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/19d99dbee57a4f91a48ce6ce7bb974b4/teacher-homework/1763012082809a8b161.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/6ca4b573c3a74e009339b0d119d2c6b2/teacher-homework/17630121046921c4cc5.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176301780297880646f.mp4",
            "", "", "", "", "" 
        ],
"K3A": [
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/17630178328878ac20f.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/87f8ebf82ac44720a8ed695edc81d7db/teacher-homework/17630178426408a59d8.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/06f5c3edcb4d4d87ad1b0cd1d2993d27/teacher-homework/17630178665677d79d3.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/bbf318fa57d4081844056b29295ba54/teacher-homework/176301793074076d4e0.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/63972810b527498d9402d45faea7bf43/teacher-homework/17630179827650c9812.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/00a0f094ef8244389261d996abd604b4/teacher-homework/1763017985597814ea5.mp4",
            "", "", ""
        ],
        "K3B": [
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018186532db70f3.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176301818877214d863.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018191225723509.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018193813bf765d.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018196433b9f19e.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018210633b0c5c5.mp4",
            "", "", ""
        ],
        "G0": [
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176301822082811ca8fd.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018228073dedc05.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018230212beeb84.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018576703e8a76d.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018581832b7e3e.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018585472d3a0b3.mp4",
            "", "", ""
        ],
        "G1A": [
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763020933347b4721b.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176302093584897e05c.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/17630209381991222ec.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/17630209406791c5de9.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176302094310318d365.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763020945477546330.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018589064cbe157.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763018591548a9cde4.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/17630186018727ef726.mp4"
        ],
        "G1B": [
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763021337298aae2a8.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176302134040302afa2.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763021343327574ffe.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763021345500e16489.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763021348021750704.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763023453394e0d4dd.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763020949093f5f015.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/6aac975ecb5d451cb03374b2cb13da5c/teacher-homework/176302095881969e17f.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176302096196573f661.mp4"
        ],
        "G2A": [
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176302192151265660a.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/17630219251885041b.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/9083ce4b5f4242bdac85816e04e0bc56/teacher-homework/1763021929116e2169c.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/9af16032c9154a31bf2a95b3b15d1025/teacher-homework/176302193109956c2ed.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763021933080534b57.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763021937116f2f98f.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176302135256081bc9e.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763021362061eb0385.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763021363940857b8e.mp4"
        ],
        "G2B": [
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/c273f4a79c2845a59ed38b42b95f07c9/teacher-homework/1763022250827a260c7.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/2d998f0708574253aa892ba9d2ad0aea/teacher-homework/17630222531960ecf7c.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/af864b979b8bf30222556756ffc34.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176302225764940fec6.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/9e2f230cb30baf83f8/teacher-homework/1763022260231b18f02.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/af864b979b8bf3022262263d4abd6.mp4",
            "", "", ""
        ],
        "G3A": [
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763022949575f44cbf.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/4402ca889ef3400b839ef84cb23d12d3/teacher-homework/1763022952100285191.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763022954689008acc.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176302295692221d798.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763022965645c40db0.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763022968544a0339d.mp4",
            "", "", ""
        ],
        "G3B": [
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176302346811779ef05.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/176302347129269b324.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763023473567337000.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/video/20251113/1763023475693e477da.mp4",
            "", "", "", "", ""
        ],
        "G4A": [
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/c03eed96e6704a3f9e2e69aa87c5d129/teacher-homework/1763023607589e0edf8.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/eddede32bb134a7b9b459da4a265cb3d/teacher-homework/176302361198451fd60.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/058ccf2fb9b44db9b36af29fa2a3d049/teacher-homework/1763023619529830ebc.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/b2f0f75f1b734391a001882ca73c60cb/teacher-homework/17630236219657ae294.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/1b734391a001882ca73c60cb/teacher-homework/1763023990625220ea.mp4",
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/9c4b0954c98c4568a47cd7078e27cc6f/teacher-homework/1763023992804c614a5.mp4",
            "", "", ""
        ],
        "G4A": [
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/c03eed96e6704a3f9e2e69aa87c5d129/teacher-homework/1763023607589e0edf8.mp4", // Unit 1
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/eddede32bb134a7b9b459da4a265cb3d/teacher-homework/176302361198451fd60.mp4", // Unit 2
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/058ccf2fb9b44db9b36af29fa2a3d049/teacher-homework/1763023619529830ebc.mp4", // Unit 3
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/b2f0f75f1b734391a001882ca73c60cb/teacher-homework/17630236219657ae294.mp4", // Unit 4
            "https://file-aliyun.firstleap.cn/homework/teacher/transcoded/9c4b0954c98c4568a47cd7078e27cc6f/teacher-homework/1763023992804c614a5.mp4", // Unit 5 (From img G4A row 6?)
             "", "", "", ""
        ]
        // ... è¯·åœ¨æ­¤å¤„ç»§ç»­æ·»åŠ  G0, G1A, G1B ç­‰å…¶ä»–çº§åˆ«çš„è§†é¢‘é“¾æ¥
    };
    
    // åˆå§‹åŒ–çº§åˆ«åˆ—è¡¨
    const levels = ["K2A", "K2B", "K3A", "K3B", "G0", "G1A", "G1B", "G2A", "G2B", "G3A", "G3B", "G4A", "G4B"];
    const levelSelect = document.getElementById("levelSelect");
    levels.forEach(lvl => {
        let option = document.createElement("option");
        option.value = lvl;
        option.text = lvl;
        levelSelect.appendChild(option);
    });

    function updateUnits() {
        const lvl = document.getElementById("levelSelect").value;
        const unitSelect = document.getElementById("unitSelect");
        unitSelect.innerHTML = '<option value="">-- è¯·é€‰æ‹©å•å…ƒ --</option>';
        
        if (lvl && videoDatabase[lvl]) {
            unitSelect.disabled = false;
            // å‡è®¾æ¯ä¸ªçº§åˆ«æœ€å¤š9ä¸ªå•å…ƒï¼Œæˆ–è€…æ ¹æ®æ•°ç»„é•¿åº¦
            for (let i = 0; i < 9; i++) { // å›¾ç‰‡ä¸­æ˜¾ç¤ºåˆ°Unit 9
                 // æ£€æŸ¥è¯¥å•å…ƒæ˜¯å¦æœ‰é“¾æ¥ï¼Œå¦‚æœæ²¡æœ‰é“¾æ¥ï¼ˆä¸ºç©ºï¼‰ï¼Œå¯ä»¥é€‰æ‹©ä¸æ˜¾ç¤ºæˆ–æ˜¾ç¤ºä½†ç½®ç°
                 // è¿™é‡Œä¸ºäº†ç®€å•ï¼Œå¦‚æœæ•°ç»„é‡Œæœ‰å†…å®¹å°±æ˜¾ç¤º
                 if (videoDatabase[lvl][i] && videoDatabase[lvl][i] !== "") {
                     let option = document.createElement("option");
                     option.value = i;
                     option.text = "Unit " + (i + 1);
                     unitSelect.appendChild(option);
                 }
            }
        } else if (lvl) {
            // å¦‚æœä»£ç é‡Œè¿˜æ²¡å¡«è¿™ä¸ªçº§åˆ«çš„é“¾æ¥
             let option = document.createElement("option");
             option.text = "è¯¥çº§åˆ«æš‚æ— æ•°æ®";
             unitSelect.appendChild(option);
        } else {
            unitSelect.disabled = true;
        }
    }

    function findVideo() {
        const lvl = document.getElementById("levelSelect").value;
        const unitIndex = document.getElementById("unitSelect").value;
        const videoContainer = document.getElementById("video-container");
        const videoPlayer = document.getElementById("mainVideo");
        const dubBtn = document.getElementById("dubbingBtn");

        if (lvl && unitIndex !== "") {
            const url = videoDatabase[lvl][unitIndex];
            videoPlayer.src = url;
            videoContainer.style.display = "block";
            dubBtn.style.display = "block";
            // è‡ªåŠ¨æ»šåŠ¨åˆ°è§†é¢‘å¤„
            videoContainer.scrollIntoView({behavior: "smooth"});
        } else {
            alert("è¯·å…ˆé€‰æ‹©çº§åˆ«å’Œå•å…ƒï¼");
        }
    }

    function startDubbingMode() {
        // 1. å°è¯•è·å–éº¦å…‹é£æƒé™ï¼ˆè¿™ä¼šé˜²æ­¢éƒ¨åˆ†æ‰‹æœºåœ¨å½•å±æ—¶æŠŠç½‘é¡µé™éŸ³ï¼Œå¹¶è®©ç”¨æˆ·æ„Ÿè§‰è¿›å…¥äº†å½•éŸ³çŠ¶æ€ï¼‰
        navigator.mediaDevices.getUserMedia({ audio: true })
            .then(stream => {
                console.log("éº¦å…‹é£å·²å°±ç»ª");
                // æ³¨æ„ï¼šæˆ‘ä»¬å®é™…ä¸Šä¸ä¼šæŠŠéº¦å…‹é£å£°éŸ³æ··æµè¿›å»ï¼ˆæŠ€æœ¯å¤ªå¤æ‚ä¸”ä¸ç¨³å®šï¼‰ï¼Œ
                // æˆ‘ä»¬åªæ˜¯åˆ©ç”¨è¿™ä¸ªAPIè¯·æ±‚æ¥ç¡®ä¿éŸ³é¢‘é€šé“æ˜¯æ‰“å¼€çš„ã€‚
            })
            .catch(err => {
                console.log("éº¦å…‹é£æƒé™è¢«æ‹’ç»ï¼Œä¸è¿‡ä¸å½±å“æ‰‹æœºç³»ç»Ÿå½•å±");
            });

        // 2. æ˜¾ç¤ºå¼•å¯¼é®ç½©å±‚
        document.getElementById("overlay").style.display = "flex";
        
        // 3. è§†é¢‘è¿›å…¥å…¨å±æ ·å¼ï¼ˆä¼ªå…¨å±ï¼Œå…¼å®¹æ€§æ›´å¥½ï¼‰
        const videoPlayer = document.getElementById("mainVideo");
        videoPlayer.classList.add("fullscreen-mode");
        document.body.style.overflow = "hidden"; // ç¦æ­¢èƒŒæ™¯æ»šåŠ¨
    }

    function startPlay() {
        const videoPlayer = document.getElementById("mainVideo");
        const overlay = document.getElementById("overlay");
        
        // éšè—é®ç½©
        overlay.style.display = "none";
        
        // ä»å¤´å¼€å§‹æ’­æ”¾
        videoPlayer.currentTime = 0;
        videoPlayer.muted = false; // ç¡®ä¿ä¸é™éŸ³
        videoPlayer.play();

        // ç›‘å¬è§†é¢‘ç»“æŸ
        videoPlayer.onended = function() {
            // é€€å‡ºå…¨å±æ¨¡å¼
            videoPlayer.classList.remove("fullscreen-mode");
            document.body.style.overflow = "auto";
            alert("é…éŸ³ç»“æŸï¼è¯·åœæ­¢æ‰‹æœºå±å¹•å½•åˆ¶å¹¶ä¿å­˜è§†é¢‘ã€‚");
        };
    }
</script>

</body>
</html>
